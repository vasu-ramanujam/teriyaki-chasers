<!DOCTYPE html>
<html>
<head>
    <title>AI Identification Workflow Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
    <h1>AI Image Identification Workflow</h1>
    <div class="mermaid">
graph TD
    A[ğŸ“± iOS App<br/>User takes photo] --> B[ğŸŒ Network Request<br/>POST /api/identify/photo]
    B --> C[ğŸ–¥ï¸ FastAPI Server<br/>localhost:8000]
    C --> D[ğŸ”§ Image Processing<br/>Validate & Compress]
    D --> E[ğŸ§  AI Service<br/>identify_photo()]
    E --> F[ğŸ¤– OpenAI GPT-4 Vision<br/>Primary API]
    
    F --> G{Success?}
    G -->|Yes| H{Confidence â‰¥ 0.8?}
    H -->|Yes| I[âœ… Return Result<br/>High Confidence]
    H -->|No| J[ğŸŒ¿ iNaturalist API<br/>Fallback]
    G -->|No| J
    
    J --> K{Success?}
    K -->|Yes| L[ğŸ”„ Compare Results<br/>Choose Best]
    K -->|No| M[ğŸ­ Mock Data<br/>Development Fallback]
    
    L --> N[ğŸ“‹ JSON Response<br/>Species + Confidence]
    I --> N
    M --> N
    
    N --> O[ğŸ“¤ HTTP Response<br/>200 OK]
    O --> P[ğŸ“± iOS Display<br/>Show Results]
    </div>

    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>

