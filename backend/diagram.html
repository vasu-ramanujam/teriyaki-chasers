<!DOCTYPE html>
<html>
<head>
    <title>AI Identification Workflow Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
    <h1>AI Image Identification Workflow</h1>
    <div class="mermaid">
graph TD
    A[📱 iOS App<br/>User takes photo] --> B[🌐 Network Request<br/>POST /api/identify/photo]
    B --> C[🖥️ FastAPI Server<br/>localhost:8000]
    C --> D[🔧 Image Processing<br/>Validate & Compress]
    D --> E[🧠 AI Service<br/>identify_photo()]
    E --> F[🤖 OpenAI GPT-4 Vision<br/>Primary API]
    
    F --> G{Success?}
    G -->|Yes| H{Confidence ≥ 0.8?}
    H -->|Yes| I[✅ Return Result<br/>High Confidence]
    H -->|No| J[🌿 iNaturalist API<br/>Fallback]
    G -->|No| J
    
    J --> K{Success?}
    K -->|Yes| L[🔄 Compare Results<br/>Choose Best]
    K -->|No| M[🎭 Mock Data<br/>Development Fallback]
    
    L --> N[📋 JSON Response<br/>Species + Confidence]
    I --> N
    M --> N
    
    N --> O[📤 HTTP Response<br/>200 OK]
    O --> P[📱 iOS Display<br/>Show Results]
    </div>

    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>

